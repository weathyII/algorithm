考虑以下问题，假设 \( n = 1 \)：

只有一只怪物，它的生命值为 \( h \)，出现在某个时间点 \( k \)。为了击杀这只怪物，我们需要让我们的法术蓄力到足以造成 \( h \) 点伤害。因此，我们需要从 \( k - h + 1 \) 秒到 \( k \) 秒施放法术。这可以看作时间轴上的一个区间 \([k - h + 1; k]\)。

为了避免处理零长度的区间，我们改用半开半闭区间表示：即这个区间覆盖从 \( k - h \) （不包括）到 \( k \) （包括）的时间，可以表示为半开区间 \((k - h; k]\)。这样，总的魔法消耗将是 \(\text{len}(\text{len} + 1) / 2\)，其中 \(\text{len}\) 是这个半开区间的长度。

现在假设 \( n = 2 \)，即有两个时间段。

如果它们没有交集（例如 \((1, 2]\) 和 \((2, 3]\) 没有交集，因为它们是半开区间），那么最好分别为两个怪物蓄力施法，而不是保存伤害。

但是，如果它们有交集，那么我们没有选择，只能将早期的伤害保存到后面的时间段。否则，施法时间将不够。  

这在数学上的含义是，两个半开区间的并集。如果它们没有交集，则保持原样。如果它们有交集，则合并为一个覆盖两个区间的半开区间。

现在再加入第三个怪物。相同的逻辑适用。当存在一对有交集的半开区间时，继续将它们合并。

所有半开区间的并集可以在 \( O(n \log n) \) 时间内完成，但在约束条件允许的情况下，也可以使用较慢的算法。